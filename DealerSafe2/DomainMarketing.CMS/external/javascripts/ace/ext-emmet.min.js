ace.define("ace/ext/emmet",["require","exports","module","ace/keyboard/hash_handler","ace/editor","ace/config"],function(n,t){function f(){}var h=n("ace/keyboard/hash_handler").HashHandler,e=n("ace/editor").Editor,i,o,r,u,s;e.prototype.indexToPosition=function(n){return this.session.doc.indexToPosition(n)};e.prototype.positionToIndex=function(n){return this.session.doc.positionToIndex(n)};f.prototype={setupContext:function(n){this.ace=n;this.indentation=n.session.getTabString();i||(i=window.emmet);i.require("resources").setVariable("indentation",this.indentation);this.$syntax=null;this.$syntax=this.getSyntax()},getSelectionRange:function(){var n=this.ace.getSelectionRange();return{start:this.ace.positionToIndex(n.start),end:this.ace.positionToIndex(n.end)}},createSelection:function(n,t){this.ace.selection.setRange({start:this.ace.indexToPosition(n),end:this.ace.indexToPosition(t)})},getCurrentLineRange:function(){var n=this.ace.getCursorPosition().row,i=this.ace.session.getLine(n).length,t=this.ace.positionToIndex({row:n,column:0});return{start:t,end:t+i}},getCaretPos:function(){var n=this.ace.getCursorPosition();return this.ace.positionToIndex(n)},setCaretPos:function(n){var t=this.ace.indexToPosition(n);this.ace.clearSelection();this.ace.selection.moveCursorToPosition(t)},getCurrentLine:function(){var n=this.ace.getCursorPosition().row;return this.ace.session.getLine(n)},replaceContent:function(n,t,r,u){var o,s,f,e;r==null&&(r=t==null?this.getContent().length:t);t==null&&(t=0);o=i.require("utils");u||(n=o.padString(n,o.getLinePaddingFromPosition(this.getContent(),t)));s=i.require("tabStops").extract(n,{escape:function(n){return n}});n=s.text;f=s.tabstops[0];f?(f.start+=t,f.end+=t):f={start:n.length+t,end:n.length+t};e=this.ace.getSelectionRange();e.start=this.ace.indexToPosition(t);e.end=this.ace.indexToPosition(r);this.ace.session.replace(e,n);e.start=this.ace.indexToPosition(f.start);e.end=this.ace.indexToPosition(f.end);this.ace.selection.setRange(e)},getContent:function(){return this.ace.getValue()},getSyntax:function(){var t,i,n;return this.$syntax?this.$syntax:(t=this.ace.session.$modeId.split("/").pop(),(t=="html"||t=="php")&&(i=this.ace.getCursorPosition(),n=this.ace.session.getState(i.row),typeof n!="string"&&(n=n[0]),n&&(n=n.split("-"),n.length>1?t=n[0]:t=="php"&&(t="html"))),t)},getProfileName:function(){switch(this.getSyntax()){case"css":return"css";case"xml":case"xsl":return"xml";case"html":var n=i.require("resources").getVariable("profile");return n||(n=this.ace.session.getLines(0,2).join("").search(/<!DOCTYPE[^>]+XHTML/i)!=-1?"xhtml":"html"),n}return"xhtml"},prompt:function(n){return prompt(n)},getSelection:function(){return this.ace.session.getTextRange()},getFilePath:function(){return""}};o={expand_abbreviation:{mac:"ctrl+alt+e",win:"alt+e"},match_pair_outward:{mac:"ctrl+d",win:"ctrl+,"},match_pair_inward:{mac:"ctrl+j",win:"ctrl+shift+0"},matching_pair:{mac:"ctrl+alt+j",win:"alt+j"},next_edit_point:"alt+right",prev_edit_point:"alt+left",toggle_comment:{mac:"command+/",win:"ctrl+/"},split_join_tag:{mac:"shift+command+'",win:"shift+ctrl+`"},remove_tag:{mac:"command+'",win:"shift+ctrl+;"},evaluate_math_expression:{mac:"shift+command+y",win:"shift+ctrl+y"},increment_number_by_1:"ctrl+up",decrement_number_by_1:"ctrl+down",increment_number_by_01:"alt+up",decrement_number_by_01:"alt+down",increment_number_by_10:{mac:"alt+command+up",win:"shift+alt+up"},decrement_number_by_10:{mac:"alt+command+down",win:"shift+alt+down"},select_next_item:{mac:"shift+command+.",win:"shift+ctrl+."},select_previous_item:{mac:"shift+command+,",win:"shift+ctrl+,"},reflect_css_value:{mac:"shift+command+r",win:"shift+ctrl+r"},encode_decode_data_url:{mac:"shift+ctrl+d",win:"ctrl+'"},expand_abbreviation_with_tab:"Tab",wrap_with_abbreviation:{mac:"shift+ctrl+a",win:"shift+ctrl+a"}};r=new f;t.commands=new h;t.runEmmetCommand=function(n){var u,f;if((r.setupContext(n),r.getSyntax()=="php")||(u=i.require("actions"),this.action=="expand_abbreviation_with_tab"&&!n.selection.isEmpty()))return!1;if(this.action=="wrap_with_abbreviation")return setTimeout(function(){u.run("wrap_with_abbreviation",r)},0);try{f=u.run(this.action,r)}catch(t){n._signal("changeStatus",typeof t=="string"?t:t.message);console.log(t)}return f};for(u in o)t.commands.addCommand({name:"emmet:"+u,action:u,bindKey:o[u],exec:t.runEmmetCommand,multiSelectAction:"forEach"});s=function(n,i){var r=i,u,f;r&&(u=r.session.$modeId,f=u&&/css|less|sass|html|php/.test(u),n.enableEmmet===!1&&(f=!1),f?r.keyBinding.addKeyboardHandler(t.commands):r.keyBinding.removeKeyboardHandler(t.commands))};t.AceEmmetEditor=f;n("ace/config").defineOptions(e.prototype,"editor",{enableEmmet:{set:function(n){this[n?"on":"removeListener"]("changeMode",s);s({enableEmmet:!!n},this)},value:!0}});t.setCore=function(n){i=n}});