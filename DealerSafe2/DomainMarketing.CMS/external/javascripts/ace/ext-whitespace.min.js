ace.define("ace/ext/whitespace",["require","exports","module","ace/lib/lang"],function(n,t){var i=n("../lib/lang");t.$detectIndentation=function(n){function v(n){for(var i=0,t=n;t<s.length;t+=n)i+=s[t]||0;return i}for(var i,p,r,u,o,a,s=[],f=[],c=0,l=0,y=Math.min(n.length,1e3),t=0;t<y;t++)if(i=n[t],/^\s*[^*+\-\s]/.test(i))for(p=i.match(/^\t*/)[0].length,i[0]=="\t"&&c++,r=i.match(/^ */)[0].length,r&&i[r]!="\t"&&(u=r-l,!(u>0)||l%u||r%u||(f[u]=(f[u]||0)+1),s[r]=(s[r]||0)+1),l=r;i[i.length-1]=="\\";)i=n[t++];var w=f.reduce(function(n,t){return n+t},0),e={score:0,length:0},h=0;for(t=1;t<12;t++)t==1?(h=v(t),o=1):o=v(t)/h,f[t]&&(o+=f[t]/w),o>e.score&&(e={score:o,length:t});return(e.score&&e.score>1.4&&(a=e.length),c>h+1)?{ch:"\t",length:a}:h+1>c?{ch:" ",length:a}:void 0};t.detectIndentation=function(n){var r=n.getLines(0,1e3),i=t.$detectIndentation(r)||{};return i.ch&&n.setUseSoftTabs(i.ch==" "),i.length&&n.setTabSize(i.length),i};t.trimTrailingSpace=function(n){for(var i,r,u=n.getDocument(),f=u.getAllLines(),t=0,e=f.length;t<e;t++)i=f[t],r=i.search(/\s+$/),r!==-1&&u.removeInLine(t,r,i.length)};t.convertIndentation=function(n,t,r){var b=n.getTabString()[0],e=n.getTabSize(),u,y,p,f;r||(r=e);t||(t=b);var k=t=="\t"?t:i.stringRepeat(t,r),o=n.doc,l=o.getAllLines(),a={},v={};for(u=0,y=l.length;u<y;u++)if(p=l[u],f=p.match(/^\s*/)[0],f){var w=n.$getStringScreenWidth(f)[0],s=Math.floor(w/e),h=w%e,c=a[s]||(a[s]=i.stringRepeat(k,s));c+=v[h]||(v[h]=i.stringRepeat(" ",h));c!=f&&(o.removeInLine(u,0,f.length),o.insertInLine({row:u,column:0},c))}n.setTabSize(r);n.setUseSoftTabs(t==" ")};t.$parseStringArg=function(n){var t={},i;return/t/.test(n)?t.ch="\t":/s/.test(n)&&(t.ch=" "),i=n.match(/\d+/),i&&(t.length=parseInt(i[0])),t};t.$parseArg=function(n){return n?typeof n=="string"?t.$parseStringArg(n):typeof n.text=="string"?t.$parseStringArg(n.text):n:{}};t.commands=[{name:"detectIndentation",exec:function(n){t.detectIndentation(n.session)}},{name:"trimTrailingSpace",exec:function(n){t.trimTrailingSpace(n.session)}},{name:"convertIndentation",exec:function(n,i){var r=t.$parseArg(i);t.convertIndentation(n.session,i.ch,i.length)}},{name:"setIndentation",exec:function(n,i){var r=t.$parseArg(i);r.length&&n.session.setTabSize(r.length);r.ch&&n.session.setUseSoftTabs(r.ch==" ")}}]});