WindowStore={doSetCookie:!1,cookieName:"__window_store__",expired:null,init:function(n,t){var i,r;WindowStore.cookieName=n||WindowStore.cookieName;t?WindowStore.expired=t:(i=new Date,i.setYear(i.getYear()+1903),WindowStore.expired=i);Windows.windows.each(function(n){n.setCookie(n.getId(),WindowStore.expired)});r={onShow:function(){WindowStore._saveCookie()},onHide:function(){WindowStore._saveCookie()}};Windows.addObserver(r);WindowStore._restoreWindows();WindowStore._saveCookie()},show:function(win){eval("var cookie = "+WindowUtilities.getCookie(Windows.cookieName));cookie!=null?cookie[win.getId()]&&win.show():win.show()},_saveCookie:function(){if(doSetCookie){var n="{";Windows.windows.each(function(t){n!="{"&&(n+=",");n+=t.getId()+": "+t.isVisible()});n+="}";WindowUtilities.setCookie(n,[WindowStore.cookieName,WindowStore.expired])}},_restoreWindows:function(){eval("var cookie = "+WindowUtilities.getCookie(Windows.cookieName));cookie!=null&&(doSetCookie=!1,Windows.windows.each(function(n){cookie[n.getId()]&&n.show()}));doSetCookie=!0}};WindowCloseKey={keyCode:Event.KEY_ESC,init:function(n){n&&(WindowCloseKey.keyCode=n);document.bind("keydown",this,this._closeCurrentWindow)},_closeCurrentWindow:function(n){var i=n||window.event,r=i.which||i.keyCode,t=Windows.focusedWindow;r==WindowCloseKey.keyCode&&t&&(t.cancelCallback?Dialog.cancelCallback():t.okCallback?Dialog.okCallback():Windows.close(Windows.focusedWindow.getId()))}};