(function(n,t){var i=function(t,i){this.$element=n(t);this.options=n.extend({},n.fn.tree.defaults,i);this.$element.on("click",".tree-item",n.proxy(function(n){this.selectItem(n.currentTarget)},this));this.$element.on("click",".tree-folder-header",n.proxy(function(n){this.selectFolder(n.currentTarget)},this));this.render()};i.prototype={constructor:i,render:function(){this.populate(this.$element)},populate:function(t){var i=this,r=t.parent().find(".tree-loader:eq(0)");r.show();this.options.dataSource.data(t.data(),function(u){r.hide();n.each(u.data,function(n,r){var u,f;r.type==="folder"?(u=i.$element.find(".tree-folder:eq(0)").clone().show(),u.find(".tree-folder-name").html(r.name),u.find(".tree-loader").html(i.options.loadingHTML),f=u.find(".tree-folder-header"),f.data(r),"icon-class"in r&&f.find('[class*="icon-"]').addClass(r["icon-class"])):r.type==="item"&&(u=i.$element.find(".tree-item:eq(0)").clone().show(),u.find(".tree-item-name").html(r.name),u.data(r),"additionalParameters"in r&&"item-selected"in r.additionalParameters&&r.additionalParameters["item-selected"]==!0&&(u.addClass("tree-selected"),u.find("i").removeClass(i.options["unselected-icon"]).addClass(i.options["selected-icon"])));t.hasClass("tree-folder-header")?t.parent().find(".tree-folder-content:eq(0)").append(u):t.append(u)});i.$element.trigger("loaded")})},selectItem:function(t){if(this.options.selectable!=!1){var i=n(t),u=this.$element.find(".tree-selected"),r=[];this.options.multiSelect?n.each(u,function(t,u){var f=n(u);f[0]!==i[0]&&r.push(n(u).data())}):u[0]!==i[0]&&(u.removeClass("tree-selected").find("i").removeClass(this.options["selected-icon"]).addClass(this.options["unselected-icon"]),r.push(i.data()));i.hasClass("tree-selected")?(i.removeClass("tree-selected"),i.find("i").removeClass(this.options["selected-icon"]).addClass(this.options["unselected-icon"])):(i.addClass("tree-selected"),i.find("i").removeClass(this.options["unselected-icon"]).addClass(this.options["selected-icon"]),this.options.multiSelect&&r.push(i.data()));r.length&&this.$element.trigger("selected",{info:r})}},selectFolder:function(t){var r=n(t),i=r.parent();r.find("."+this.options["close-icon"]).length?(i.find(".tree-folder-content").children().length?i.find(".tree-folder-content:eq(0)").show():this.populate(r),i.find("."+this.options["close-icon"]+":eq(0)").removeClass(this.options["close-icon"]).addClass(this.options["open-icon"]),this.$element.trigger("opened",r.data())):(this.options.cacheItems?i.find(".tree-folder-content:eq(0)").hide():i.find(".tree-folder-content:eq(0)").empty(),i.find("."+this.options["open-icon"]+":eq(0)").removeClass(this.options["open-icon"]).addClass(this.options["close-icon"]),this.$element.trigger("closed",r.data()))},selectedItems:function(){var i=this.$element.find(".tree-selected"),t=[];return n.each(i,function(i,r){t.push(n(r).data())}),t}};n.fn.tree=function(r,u){var f,e=this.each(function(){var e=n(this),t=e.data("tree"),o=typeof r=="object"&&r;t||e.data("tree",t=new i(this,o));typeof r=="string"&&(f=t[r](u))});return f===t?e:f};n.fn.tree.defaults={multiSelect:!1,loadingHTML:"<div>Loading...<\/div>",cacheItems:!0};n.fn.tree.Constructor=i})(window.jQuery);
/*
//# sourceMappingURL=fuelux.tree.min.js.map
*/